# QMD-Benchâ€”â€”Agent-Driven Cross-Architecture Migration Benchmark 
# QMD-Benchâ€”â€”æ™ºèƒ½ä½“é©±åŠ¨çš„è·¨æ¶æ„ä»£ç è¿ç§» Benchmark


## ğŸ“– ç›®å½• (Table of Contents)

- [OpenCVåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†](#opencvåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†)
- [NCNNåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†](#ncnnåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†)
- [OpenMPåº“çº§è‡ªåŠ¨å¹¶è¡Œä¼˜åŒ–å·¥å…·](#openmpåº“çº§è‡ªåŠ¨å¹¶è¡Œä¼˜åŒ–å·¥å…·)
- [FFmpegåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†](#ffmpegåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†)


---
## OpenCVåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†

### é¡¹ç›®ä»‹ç» (Introduction)

ä¸ºæ¨åŠ¨ RISC-V ç”Ÿæ€åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å‘å±•ï¼Œå¹¶æ¢ç´¢å¤§æ¨¡å‹æ™ºèƒ½ä½“åœ¨è·¨æ¶æ„ä»£ç è¿ç§»ä¸­çš„æ½œåŠ›ï¼Œæˆ‘ä»¬åŸºäºå¹¿æ³›ä½¿ç”¨çš„ OpenCV è§†è§‰åº“ï¼Œæ„å»ºäº†é¦–ä¸ª æ™ºèƒ½ä½“é©±åŠ¨çš„ OpenCV è·¨æ¶æ„è¿ç§» Benchmarkã€‚

æœ¬ Benchmark èšç„¦äºå°†Opencvçš„ ARM NEON å‘é‡åŒ–ä»£ç è‡ªåŠ¨è¿ç§»è‡³ RISC-V Vector (RVV) æ¶æ„ï¼Œæ—¨åœ¨è¯„ä¼°æ™ºèƒ½ä½“åœ¨ä¿æŒåŠŸèƒ½æ­£ç¡®æ€§çš„åŒæ—¶ï¼Œå®ç°æ€§èƒ½ä¼˜åŒ–çš„èƒ½åŠ›ï¼Œä¸ºè‡ªåŠ¨åŒ–è¿ç§»å·¥å…·æä¾›æ ‡å‡†åŒ–è¯„ä¼°å¹³å°ã€‚

---

### ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªBenchmarkï¼Ÿ

#### ç°çŠ¶ä¸ç—›ç‚¹
ç°æœ‰æ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶å¤§å¤šæ•°å¹¶ä¸åŸç”Ÿæ”¯æŒ RISC-V å‘é‡æ‰©å±•åç«¯ã€‚è™½ç„¶ä»…æœ‰å°‘æ•°æ¡†æ¶æ‰‹åŠ¨æ”¯æŒäº†éƒ¨åˆ†ç®—å­çš„ RVV åç«¯ï¼Œä½†å¾€å¾€å­˜åœ¨ç›¸æ¯”æ ‡é‡å®ç°**æ€§èƒ½è´Ÿä¼˜åŒ–**çš„ç®—å­ï¼Œå¯¼è‡´æ— æ³•å……åˆ†åˆ©ç”¨ RISC-V å¤„ç†å™¨çš„å‘é‡æ‰©å±•æ¨¡å—æ¥åŠ é€Ÿæ¨¡å‹æ¨ç†ã€‚

å¯¹è¿™äº›æ·±åº¦å­¦ä¹ æ¡†æ¶é€ä¸ªæ‰‹åŠ¨æ”¯æŒ RISC-V å‘é‡åŒ–éœ€è¦è€—è´¹å¤§é‡çš„äººåŠ›å’Œæ—¶é—´æˆæœ¬ã€‚å› æ­¤ï¼Œ**äºŸéœ€å®ç°è¿™äº›æ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶çš„è‡ªåŠ¨åŒ–å‘é‡åŒ–æ”¯æŒï¼Œå¹¶åˆ‡å®æå‡æ¨¡å‹æ¨ç†é€Ÿåº¦ã€‚**

#### è‡ªåŠ¨åŒ–è¿ç§»çš„ä»·å€¼
è‡ªåŠ¨åŒ–ä»£ç è¿ç§»åœ¨ç³»ç»Ÿç»´æŠ¤æ–¹é¢è‡³å…³é‡è¦ã€‚ç”±äºç³»ç»Ÿåœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­é€šå¸¸ä¼šç»å†å¤šæ¬¡è¿ç§»ï¼Œè‡ªåŠ¨åŒ–å¯ä»¥é¿å…é‡å¤çš„æ‰‹åŠ¨å·¥ä½œã€‚æ·±åº¦å­¦ä¹ æ¨ç†æ¡†æ¶å¯¹ RISC-V çš„å‘é‡åŒ–æ”¯æŒï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä»ç°æœ‰æˆç†Ÿçš„ âŒ86ã€ARM ç­‰æ¶æ„çš„å‘é‡åŒ–å®ç°ï¼Œè·¨æ¶æ„è¿ç§»åˆ° RISC-V çš„è¿‡ç¨‹ã€‚

#### å¤§æ¨¡å‹æ™ºèƒ½ä½“çš„æœºé‡
éšç€å¤§æ¨¡å‹å‚æ•°è§„æ¨¡çš„ä¸æ–­æ‰©å¼ ï¼Œå…¶åœ¨ä»£ç é¢†åŸŸçš„æ€§èƒ½å–å¾—äº†æ˜¾è‘—æå‡ã€‚è¿‘å¹´æ¥ï¼Œå¤§æ¨¡å‹æ™ºèƒ½ä½“åœ¨ä»£ç ç”Ÿæˆã€è¡¥å…¨ã€é‡æ„ã€ä¿®å¤ã€æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆä»¥åŠæœ€è¿‘çš„ä»£ç è¿ç§»ç­‰è½¯ä»¶å·¥ç¨‹ä»»åŠ¡ä¸­å¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚

åˆ©ç”¨å¤§æ¨¡å‹æ™ºèƒ½ä½“è¿›è¡Œè‡ªåŠ¨ç®—å­æ€§èƒ½ä¼˜åŒ–ï¼Œä¸ä»…èƒ½èŠ‚çœæ‰‹åŠ¨è¿ç§»çš„å¤§é‡æˆæœ¬ï¼Œè¿˜èƒ½æ˜¾è‘—æå‡ç«¯åˆ°ç«¯çš„æ¨¡å‹æ¨ç†é€Ÿåº¦ã€‚

---

### ğŸ§© è¿ç§»éš¾ç‚¹ (Key Challenges)

æœ¬é¡¹ç›®é¢ä¸´çš„æŒ‘æˆ˜ä¸ä»…ä»…æ˜¯æŒ‡ä»¤é›†çš„ç¿»è¯‘ï¼Œæ›´åœ¨äºè·¨è¶Š**ç¡¬ä»¶æ¶æ„èŒƒå¼**ä¸**è½¯ä»¶å·¥ç¨‹å¤æ‚åº¦**çš„åŒé‡é¸¿æ²Ÿã€‚

#### 1. ç¡¬ä»¶æ¶æ„å·®å¼‚

**å›ºå®šå‘é‡é•¿åº¦ vs å¯æ‰©å±•å‘é‡æ¶æ„**

ARM NEONï¼šåŸºäº128-bitå›ºå®šé•¿åº¦å‘é‡å¯„å­˜å™¨ï¼Œä»£ç ä¸­å¤§é‡ç¡¬ç¼–ç çš„å¾ªç¯æ­¥é•¿ï¼ˆå¦‚ `i += 4`ï¼‰ã€‚
RISC-V RVVï¼šé‡‡ç”¨ç¡¬ä»¶æ— å…³çš„å‘é‡é•¿åº¦(VLEN)ï¼Œå¿…é¡»å°†å®šé•¿å¾ªç¯é‡æ„ä¸ºåŸºäº `vsetvli` çš„ Strip-mining å¾ªç¯ã€‚
**è¿ç§»æŒ‘æˆ˜**ï¼šæ™ºèƒ½ä½“éœ€è¦ç†è§£ä»"å®šé•¿å‘é‡åŒ–"åˆ°"å˜é•¿å‘é‡åŒ–"çš„ç®—æ³•çº§é‡æ„ã€‚

**æŒ‡ä»¤é›†è¯­ä¹‰é¸¿æ²Ÿ**

ARM NEONï¼šä¸°å¯Œçš„å‘é‡æŒ‡ä»¤é›†ï¼Œå¦‚ `vmlaq`ï¼ˆä¹˜åŠ ç´¯åŠ ï¼‰ã€`vqmovn`ï¼ˆé¥±å’Œçª„åŒ–ï¼‰ã€‚
RISC-V RVVï¼šç¼ºä¹ç›´æ¥ç­‰æ•ˆæŒ‡ä»¤ï¼Œéœ€ç»„åˆå¤šæ¡åŸºç¡€æŒ‡ä»¤å®ç°å¤æ‚æŒ‡ä»¤ã€‚
**è¿ç§»æŒ‘æˆ˜**ï¼šæ™ºèƒ½ä½“éœ€å…·å¤‡æŒ‡ä»¤è¯­ä¹‰ç†è§£èƒ½åŠ›ï¼Œè¿›è¡Œè·¨æ¶æ„çš„æŒ‡ä»¤é‡ç»„

**å¯„å­˜å™¨æœºåˆ¶å·®å¼‚**

ARM NEONï¼šå‘é‡å¯„å­˜å™¨ä¸é€šç”¨å¯„å­˜å™¨åˆ†ç¦»ï¼Œå‘é‡æŒ‡ä»¤éœ€æ˜¾å¼æŒ‡å®šå‘é‡å¯„å­˜å™¨ã€‚
RISC-V RVVï¼šå‘é‡å¯„å­˜å™¨ä¸é€šç”¨å¯„å­˜å™¨ç»Ÿä¸€ï¼Œå‘é‡æŒ‡ä»¤éœ€æ˜¾å¼æŒ‡å®šå‘é‡é•¿åº¦ã€‚
**è¿ç§»æŒ‘æˆ˜**ï¼šæ™ºèƒ½ä½“éœ€ç†è§£å¯„å­˜å™¨æœºåˆ¶å·®å¼‚ï¼Œè¿›è¡Œå¯„å­˜å™¨åˆ†é…ä¸æŒ‡ä»¤é‡æ’ã€‚

#### 2. è½¯ä»¶å·¥ç¨‹å¤æ‚åº¦

**OpenCV æ¨¡å—åŒ–ä¾èµ–çš„å¹¿åº¦æŒ‘æˆ˜**

```teâŒt
   ç®—å­å®ç°    â†’          æ¨¡å—æ¥å£              â†’          ç¡¬ä»¶æŠ½è±¡å±‚(HAL)
      â†“                      â†“                                   â†“
  dot_product    hal/riscv-rvv/include/core.hpp  modules/core/src/hal_replacement.hpp
```

- å•ä¸ªç®—å­è¿ç§»å¯èƒ½æ¶‰åŠå¤šä¸ªä¸åŒæ¨¡å—çš„æ¥å£ç†è§£
    
- **è¿ç§»æŒ‘æˆ˜**ï¼šæ™ºèƒ½ä½“éœ€è¦åœ¨å¤§è§„æ¨¡ä»£ç åº“ä¸­å‡†ç¡®è¿½è¸ªè·¨æ¨¡å—ä¾èµ–å…³ç³»

**OpenCV ç¡¬ä»¶æŠ½è±¡å±‚(HAL)çš„å¤æ‚æ€§**
    
- åŒä¸€åŠŸèƒ½åœ¨ HAL å±‚å¯èƒ½æœ‰å¤šä¸ªåç«¯å®ç°ï¼šNEONã€OpenCLã€CUDAã€çº¯C++ç­‰
        
- æ™ºèƒ½ä½“éœ€è¦è¯†åˆ«å¹¶ä¸“æ³¨äºç‰¹å®šç¡¬ä»¶åç«¯çš„è¿ç§»ï¼Œé¿å…æ··æ·†ä¸åŒå®ç°
        
- **è¿ç§»æŒ‘æˆ˜**ï¼šå‡†ç¡®ç†è§£ç¡¬ä»¶æŠ½è±¡è¾¹ç•Œï¼Œé¿å…è·¨æŠ½è±¡å±‚çš„é”™è¯¯è¿ç§»

**å®å®šä¹‰ä¸æ¨¡æ¿çš„æ·±åº¦ä½¿ç”¨**

- OpenCV ä»£ç ä¸­å¹¿æ³›ä½¿ç”¨å®å®šä¹‰ä¸æ¨¡æ¿ï¼Œå¢åŠ äº†ä»£ç ç†è§£å’Œè¿ç§»çš„éš¾åº¦

- **è¿ç§»æŒ‘æˆ˜**ï¼šæ™ºèƒ½ä½“éœ€è¦ç†è§£å¹¶æ­£ç¡®å¤„ç†å®å®šä¹‰ä¸æ¨¡æ¿ï¼Œé¿å…ä»£ç æ··æ·†ä¸é”™è¯¯

**å¤§å‹å¼€æºåº“ç»“æ„å¤æ‚**
- OpenCV æ˜¯ä¸€ä¸ªå¤§å‹å¼€æºåº“ï¼ŒåŒ…å«å¤šä¸ªæ¨¡å—å’Œå­é¡¹ç›®ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰å…¶ç‰¹å®šçš„ä¾èµ–å’Œå®ç°æ–¹å¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒOpenCVå¤šå¹´æ¥ç”±å¤šäººåä½œå¼€å‘ï¼Œä»£ç åº“çš„å†™ä½œé£æ ¼å’Œè§„èŒƒå­˜åœ¨å¾ˆå¤§å·®å¼‚ï¼Œè¿™ä½¿Agentåœ¨ç†è§£å’Œè¿ç§»ä»£ç æ—¶é¢ä¸´å·¨å¤§æŒ‘æˆ˜ã€‚

#### 3.ä¸Šä¸‹æ–‡ä¾èµ–ä¸å¹»è§‰é£é™©

**éšå¼ä¾èµ–é“¾çš„è¯†åˆ«**

- ç®—å­å®ç°ä¾èµ–åˆ†æ•£åœ¨å¤šä¸ªå¤´æ–‡ä»¶ä¸­çš„ç±»å‹å®šä¹‰ï¼ˆå¦‚Â `cv::Size`ã€`cv::Point`ï¼‰
        
- å¹³å°ç‰¹å®šå®ï¼ˆ`CV_NEON`ã€`CV_SIMD128`ï¼‰çš„æ¡ä»¶ç¼–è¯‘é€»è¾‘
        
- **è¿ç§»æŒ‘æˆ˜**ï¼šæ™ºèƒ½ä½“å®¹æ˜“å› ç¼ºå¤±ä¸Šä¸‹æ–‡è€Œ"è‡†é€ "ä¸å­˜åœ¨çš„APIæˆ–é”™è¯¯ç±»å‹
        
**å·¥ç¨‹é…ç½®ä¸æ„å»ºç³»ç»Ÿçš„ç†è§£**
- OpenCV çš„æ„å»ºç³»ç»Ÿå¤æ‚ï¼Œæ¶‰åŠå¤šä¸ªç¼–è¯‘é€‰é¡¹ï¼ˆå¦‚Â `WITH_OPENCL`ã€`WITH_CUDA`ï¼‰

- **è¿ç§»æŒ‘æˆ˜**ï¼šæ™ºèƒ½ä½“éœ€è¦ç†è§£å¹¶æ­£ç¡®é…ç½®æ„å»ºç³»ç»Ÿï¼Œé¿å…ç¼–è¯‘é”™è¯¯

---

### ä¸ç›®å‰ä»£ç  Benchmark çš„å¯¹æ¯” (vs. Related Benchmarks)

æœ¬ Benchmark å¡«è¡¥äº†ç°æœ‰ä»£ç è¯„æµ‹æ•°æ®é›†åœ¨ **è·¨æ¶æ„è¿ç§» (Cross-Architecture)** ä¸ **æ€§èƒ½ä¼˜åŒ– (Performance-Optimization)** äº¤å‰é¢†åŸŸçš„ç©ºç™½ã€‚

##### ğŸ“Š ç»¼åˆå¯¹æ¯”è¡¨ (Comparison Table)

| benchmark |  ç²’åº¦ | ä»£ç è¡Œæ•° | ä¾èµ–æ•° | æ•°æ®é›†è§„æ¨¡ | è¯­è¨€ | æ­£ç¡®æ€§ | æ€§èƒ½ | è·¨æ¶æ„ç”Ÿæˆ |æè¿° |
|------------|------|----------|--------|------------|------|--------|--|----|----------------|
| ClassEval | Class-level| |  | 100ä¸ª | Python | âœ… | âŒ | âŒ |ç±»çº§åˆ«çš„ä»£ç ç”Ÿæˆä¸è¯„ä¼°benchmark | 
| SWE-bench | Repo-level| |  | 300/500 | Python | âœ… | âŒ | âŒ |è§£å†³çœŸå®ä¸–ç•ŒGitHubé—®é¢˜çš„ä»“åº“çº§benchmark | 
| JavaBench | Repo-level | |  | 389 | Java | âœ… | âŒ | âŒ |ä¸“ä¸šçº§Javaå¼€å‘èƒ½åŠ›è¯„ä¼°benchmark |
| KernelBench | Repo-level | |  | 250 | CUDA | âœ… | âœ… | âŒ |é«˜æ€§èƒ½GPUå†…æ ¸ç”Ÿæˆèƒ½åŠ›è¯„ä¼°benchmark |
| ParEval |func-level| |  | 60 | CUDAã€C++ | âœ… | âœ… | âŒ | å¹¶è¡Œè®¡ç®—ç¨‹åºç”Ÿæˆä¸æ­£ç¡®æ€§è¯„ä¼°benchmark |
| Swe-Perf |repo-level | |  | 140 | Python | âœ… | âœ… | âŒ | è½¯ä»¶ä»“åº“ä¸­çš„æ€§èƒ½ä¼˜åŒ–ä¸ç“¶é¢ˆä¿®å¤benchmark |
| cisc-risc |func-level ||  | 164 | Assembly | âœ… | âŒ | âœ… | cisc-riscæ±‡ç¼–ä»£ç è½¬è¯‘benchmark | 
| **QMD-Bench** | repo-level | |  |  | C++/Intrinsic | âœ… | âœ… | âœ… |é«˜æ€§èƒ½åº“è·¨æ¶æ„è¿ç§»ä¸æ€§èƒ½ä¼˜åŒ–benchmark | 



##### æ ¸å¿ƒå·®å¼‚åˆ†æ (Key Differentiators)



- **ClassEvalã€JavaBenchã€SWE-bench**Â ç­‰ä¸»è¦å…³æ³¨ç®—æ³•é€»è¾‘æ­£ç¡®æ€§ï¼Œç¼ºä¹å¯¹æ€§èƒ½çš„è€ƒé‡
    
- **Swe-Perf**Â è™½ç„¶æ¶‰åŠæ€§èƒ½ä¼˜åŒ–ï¼Œä½†å±€é™äºç®—æ³•å±‚é¢ä¼˜åŒ–ï¼Œç¼ºä¹æ¶æ„ç»´åº¦ä¼˜åŒ–çš„è€ƒé‡
  
- **KernelBench**Â ä¸“æ³¨äº GPU å¹¶è¡Œè®¡ç®—ï¼Œä½†ç¼ºä¹è·¨æ¶æ„è¿ç§»ç»´åº¦ï¼Œä¸”ç¼ºä¹å·¥ç¨‹å®è·µæ€§è€ƒé‡
- **cisc-risc**Â æ¶‰åŠæ¶æ„è¿ç§»ï¼Œä¸»è¦å…³æ³¨æ±‡ç¼–ä»£ç è½¬è¯‘ï¼Œä½†åªæ˜¯ç®€å•çš„å‡½æ•°çº§è½¬è¯‘
- **ParEval** ä¸“æ³¨äºå¹¶è¡Œè®¡ç®—ï¼Œä½†ä»…å…³æ³¨ç®€å•çš„å‡½æ•°çº§å¹¶è¡Œä»£ç çš„æ­£ç¡®æ€§è¯„ä¼°
    
- **QMD-Bench**Â åœ¨åº“çº§è¿ç§»çš„åŒæ—¶ï¼Œå…¨é¢ä¿è¯åŠŸèƒ½æ­£ç¡®æ€§ã€æ€§èƒ½ä¼˜åŒ–å’Œè·¨æ¶æ„è¿ç§»ï¼Œæ›´è´´è¿‘å·¥ä¸šçº§è¿ç§»éœ€æ±‚ã€‚
    

---

### ğŸ“Š æµ‹è¯•é›†è®¾è®¡ä¸éš¾åº¦åˆ†çº§ (Dataset & Hierarchy)

æœ¬ Benchmark é‡‡ç”¨åˆ†å±‚æµ‹è¯•çš„æ–¹æ³•è®ºï¼Œå¦‚ [å±‚çº§åˆ’åˆ†ä»‹ç»](design/intro_NCNNbenchmark_level.md) æ‰€è¿°ï¼Œä»å¾®è§‚çš„ç®—å­å®ç°åˆ°å®è§‚çš„æ¨¡å‹æ¨ç†ï¼Œæ„å»ºäº† **ç®—å­çº§ (Operator)**ã€**æ¨¡å‹çº§ (Model)** å’Œ **åº“çº§ (Library)** ä¸‰å¤§ç»´åº¦çš„è¯„ä¼°ä½“ç³»ã€‚

#### 1. æµ‹è¯•å±‚çº§è®¾è®¡ (Test Levels)

##### ğŸŸ¢ Level 1: ç®—å­çº§æµ‹è¯• (Operator Level)
è¿™æ˜¯ Benchmark çš„åŸºçŸ³ï¼Œå…³æ³¨å•ä¸ªç®—å­ä» âŒ86/ARM åˆ° RISC-V RVV çš„è¿ç§»è´¨é‡ã€‚
* **åŠŸèƒ½æ­£ç¡®æ€§æµ‹è¯• (Unit Testing)**:
    * å¯¹è¿ç§»åçš„ç®—å­è¿›è¡Œä¸¥æ ¼çš„å•å…ƒæµ‹è¯•ã€‚
    * **æ ‡å‡†**: å¿…é¡»é€šè¿‡äººç±»æ‰‹åŠ¨ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ (Test Cases)ï¼Œè¾“å‡ºç»“æœéœ€ä¸æ ‡é‡å®ç°æŒ‰ä½ä¸€è‡´ (Bit-eâŒact match) æˆ–è¯¯å·®åœ¨å®¹è®¸èŒƒå›´å†…ã€‚
* **æ€§èƒ½åŸºå‡†æµ‹è¯• (Performance Benchmarking)**:
    * å¯¹æ¯”è¯„ä¼°è¿ç§»åçš„ RVV ç®—å­æ€§èƒ½ã€‚
    * **åŸºçº¿ (Baseline)**: RISC-V æ ‡é‡å®ç° (Scalar Implementation)ã€‚
    * **å‚è€ƒ (Reference)**: äººç±»ä¸“å®¶æ‰‹å·¥ä¼˜åŒ–çš„ RVV ç®—å­æ€§èƒ½ (Human-Optimized)ã€‚

##### ğŸŸ¡ Level 2: æ¨¡å‹çº§æµ‹è¯• (Model Level)
å…³æ³¨å¤šä¸ªç®—å­ååŒå·¥ä½œæ—¶çš„ç«¯åˆ°ç«¯è¡¨ç°ã€‚
* **Step 1: ç®—å­è¦†ç›–æµ‹è¯•**: é¦–å…ˆå¯¹ç›®æ ‡æ¨¡å‹æ¶‰åŠçš„æ‰€æœ‰ç®—å­ç±»å‹è¿›è¡Œå•ç‹¬çš„å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿â€œç§¯æœ¨å—â€çš„åŠŸèƒ½æ­£ç¡®æ€§ã€‚
* **Step 2: æ¨ç†ç²¾åº¦æµ‹è¯• (Inference Accuracy)**:
    * è¿è¡Œå®Œæ•´æ¨¡å‹çš„æ¨ç†æµç¨‹ã€‚
    * **æŒ‡æ ‡**: å°†æ¨¡å‹çš„æ¨ç†ç»“æœä¸ RISC-V æ ‡é‡å®ç°ä¸‹çš„ç»“æœè¿›è¡Œå¯¹æ¯”ï¼Œè®¡ç®— Top-1/Top-5 ç²¾åº¦æŸå¤±ï¼Œç¡®ä¿æ— é€»è¾‘é”™è¯¯å¯¼è‡´çš„ç²¾åº¦å´©å¡Œã€‚
* **Step 3: ç«¯åˆ°ç«¯æ€§èƒ½æµ‹è¯• (E2E Performance)**:
    * æµ‹è¯•æ•´ä¸ªæ¨¡å‹å®Œæˆä¸€æ¬¡æ¨ç†æ‰€éœ€çš„æ€»è€—æ—¶ï¼ˆLatencyï¼‰ã€‚
    * **è¯„ä¼°**: å¯¹æ¯”æ ‡é‡å®ç°å’Œäººç±»æ‰‹å·¥å®ç°çš„åŠ é€Ÿæ¯” (Speedup)ã€‚

##### ğŸ”´ Level 3: åº“çº§æµ‹è¯• (Library Level)
* *ğŸš§ æ•¬è¯·æœŸå¾… (Coming Soon)* - æ—¨åœ¨è¯„ä¼°æ•´ä¸ª NCNN åº“åœ¨ RISC-V æ¶æ„ä¸Šçš„ç¼–è¯‘æ„å»ºã€ä¾èµ–ç®¡ç†åŠç³»ç»Ÿçº§å…¼å®¹æ€§ã€‚

---

#### 2. éš¾åº¦åˆ†çº§æ ‡å‡† (Difficulty Standards)

ä¸ºäº†ç§‘å­¦è¯„ä¼°æ™ºèƒ½ä½“çš„èƒ½åŠ›è¾¹ç•Œï¼Œæˆ‘ä»¬åœ¨ä¸åŒå±‚çº§è®¾è®¡äº†ç»†ç²’åº¦çš„éš¾åº¦åˆ†çº§ã€‚

#### ğŸ§© ç®—å­çº§éš¾åº¦ (Operator Difficulty)
åŸºäº**è½¯ä»¶é€»è¾‘**ä¸**ç¡¬ä»¶ç‰¹æ€§**çš„åŒé‡ç»´åº¦è¿›è¡Œåˆ†çº§ã€‚
* **ä¾æ®**: ç®—å­çš„ä»£ç è¡Œæ•°ã€æ§åˆ¶æµå¤æ‚åº¦ (Software) ä»¥åŠæŒ‡ä»¤ååã€å‘é‡åŒ–éš¾åº¦ (Hardware)ï¼Œå‚è€ƒæ–‡æ¡£ [ç®—å­éš¾åº¦åˆ’åˆ†ä¾æ®](design/intro_ops_dim.md)ã€‚
* **æ•°æ®**: è¯¦ç»†åˆ†çº§è¯·å‚é˜… [ç®—å­éš¾åº¦åˆ’åˆ†è¡¨](design/operator_difficulty_matriâŒ.csv)ã€‚

---

### ğŸ§ª æµ‹è¯•é¢˜ç›® (Test Cases)

åŸºäºä¸Šè¿°è®¾è®¡ï¼Œæˆ‘ä»¬æä¾›äº†ä¸°å¯Œçš„æµ‹è¯•ç”¨ä¾‹é›†ï¼Œæ¶µç›–ä»åŸºç¡€ç®—å­åˆ°å¤æ‚æ¨¡å‹åœºæ™¯çš„å…¨é¢è¯„ä¼°ã€‚

#### 1. ç®—å­çº§é¢˜ç›® (Operator Cases)
æ•°æ®é›†åŒ…å« **16 ä¸ª NCNN æ¨ç†æ¡†æ¶æ ¸å¿ƒç®—å­**ï¼Œæ—¨åœ¨è¦†ç›–æ¨ç†å…³é”®è·¯å¾„å¹¶éªŒè¯ RVV å‘é‡åŒ–åŠ é€Ÿæ•ˆæœï¼Œè¯¦è§ [ç®—å­çº§é¢˜ç›®](data/operators_level/NCNN_operator_README.md)ã€‚ä¸»è¦ç±»åˆ«å¦‚ä¸‹ï¼š

* **æ¿€æ´»ä¸å½’ä¸€åŒ– (Activation & Norm)**:
    * `ReLU`, `Swish`, `Sigmoid`, `TanH`, `GELU` (åŒ…å«è¿‘ä¼¼å®ç°è·¯å¾„)
    * `BatchNorm` (é€šé“æ ‡å‡†åŒ–), `Dropout` (æ¨ç†æœŸç¼©æ”¾)
* **å·ç§¯ä¸åºåˆ—å»ºæ¨¡ (Convolution & Sequence)**:
    * `Convolution1D` (ä¸€ç»´å·ç§¯), `DepthwiseConvolution` (æ·±åº¦å¯åˆ†ç¦»å·ç§¯)
    * `LSTM` (é•¿çŸ­æœŸè®°å¿†å•å…ƒ), `InnerProduct` (å…¨è¿æ¥)
* **ç»“æ„ä¸æ•°æ®å¤„ç† (Structure & Data)**:
    * `Pooling` (æ± åŒ–), `SoftmaâŒ` (å½’ä¸€åŒ–æŒ‡æ•°)
    * `Concat` (å¤šè¾“å…¥æ‹¼æ¥ï¼Œå«é€šé“ç‰¹åŒ–å˜ä½“), `Eltwise` (é€å…ƒç´ åŠ /ä¹˜/æœ€å¤§)

#### 2. æ¨¡å‹çº§é¢˜ç›® (Model Cases)
å…±è®¡ **41 ä¸ªæ¨¡å‹**ï¼Œåˆ†ä¸ºä¸¤ä¸ªå±‚çº§è¿›è¡Œç«¯åˆ°ç«¯è¿ç§»è¯„ä¼°ï¼Œè€ƒå¯Ÿ Agent åœ¨ä¸åŒå¤æ‚åº¦ä¸‹çš„ç®—å­å®ç°ä¸æ›¿æ¢èƒ½åŠ›ï¼Œè¯¦è§ [æ¨¡å‹çº§ Level 1 é¢˜ç›®](data/models_level/Level1_README.md) å’Œ [æ¨¡å‹çº§ Level 2 é¢˜ç›®](data/models_level/Level2_README.md)ã€‚

##### Level 1ï¼šåŸºç¡€æ¨¡å‹è¿ç§» (17 ä¸ªæ¨¡å‹)
ä¸»è¦ç”¨äºæµ‹è¯• Agent åœ¨æ— ç®—å­é‡å çš„å®æˆ˜åœºæ™¯ä¸‹çš„åº•å±‚ç®—å­è¿ç§»èƒ½åŠ›ã€‚
* **ç›®æ ‡æ£€æµ‹ (Detection)**: `MobileNetSSD`, `NanoDet` (è½»é‡çº§), `MobileNetV2/V3 SSDLite`, `SqueezeNetSSD`, `PeleeNet SSD`
* **å›¾åƒåˆ†ç±» (Classification)**: `SqueezeNet` (Fire module), `ShuffleNetV2` (Channel Shuffle), `YOLOv8/v11-Cls`
* **OCR ä¸æ–‡æœ¬ (OCR & TeâŒt)**: `PP-OCRv3`, `PP-OCRv4` (æ£€æµ‹ä¸è¯†åˆ«æµæ°´çº¿)
* **ç‰¹å®šä»»åŠ¡ (Specialized Tasks)**:
    * `SimplePose` (å§¿æ€ä¼°è®¡)
    * `RVM` (å®æ—¶è§†é¢‘æŠ å›¾)
    * `P2PNet` (äººç¾¤è®¡æ•°/å¯†åº¦ä¼°è®¡)
    * `Piper` (è¯­éŸ³åˆæˆæ¨ç†æ¨¡å—)

##### Level 2ï¼šå¤æ‚åº”ç”¨åœºæ™¯ (24 ä¸ªæ¨¡å‹)
ä¾§é‡äºæµ‹è¯• Agent åœ¨å®Œæ•´æ¨¡å‹åœºæ™¯ä¸‹å¤„ç†å¤šæ ·åŒ–ç®—å­é›†åˆä¸å¤æ‚æ•°æ®æµçš„èƒ½åŠ›ã€‚
* **YOLO å…¨ç³»åˆ— (YOLO Series)**: è¦†ç›– `YOLOv2` è‡³ `YOLOv11` çš„ç»å…¸ä¸æœ€æ–°ç‰ˆæœ¬ï¼ŒåŒ…å« `YOLOâŒ`, `YOLOv8-World` (å¼€æ”¾è¯æ±‡æ£€æµ‹) ä»¥åŠ `OBB` (æ—‹è½¬æ¡†)ã€`Pose` (å§¿æ€)ã€`Seg` (åˆ†å‰²) ç­‰å˜ä½“ã€‚
* **é«˜çº§æ£€æµ‹ä¸åˆ†å‰² (Advanced Detection & Segmentation)**:
    * `Faster R-CNN` (ä¸¤é˜¶æ®µæ£€æµ‹, RPN)
    * `YOLACT` (å®æ—¶å®ä¾‹åˆ†å‰²)
    * `R-FCN` (åŒºåŸŸå…¨å·ç§¯ç½‘ç»œ)
* **äººè„¸åˆ†æ (Face Analysis)**:
    * `RetinaFace` (äººè„¸æ£€æµ‹ä¸å…³é”®ç‚¹)
    * `SCRFD` (é«˜æ•ˆäººè„¸æ£€æµ‹ï¼Œå« CrowdHuman ä¼˜åŒ–ç‰ˆ)

#### 3. åº“çº§é¢˜ç›® (Lib Cases)
æ•¬è¯·æœŸå¾…ã€‚

> ğŸ“¥ **è·å–å®Œæ•´æµ‹è¯•æ•°æ®**: è¯·è®¿é—® `data/` ç›®å½•è·å–è¯¦ç»† JSON æ ¼å¼çš„æµ‹è¯•ç”¨ä¾‹ã€‚

---

### ğŸ“Š åŸºå‡†æµ‹è¯•ç»“æœ (SoTA Results)

ä¸ºäº†æ·±å…¥åˆ†ææ™ºèƒ½ä½“åœ¨ä¸åŒç±»å‹ç®—å­ä¸Šçš„è¡¨ç°ï¼Œæˆ‘ä»¬æä¾›äº†æ ¸å¿ƒç®—å­çš„é€é¡¹è¯„æµ‹ç»“æœï¼Œè¯¦ç»†æ–‡ä»¶è§ [ç®—å­çº§è¯„æµ‹æ•°æ®](design/sota_llm_result.csv)ã€‚

<details>
<summary>ğŸ”» ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†ç®—å­é€šè¿‡ç‡ (Click to eâŒpand)</summary>

| Operator | Joy(DS-V3) | Joy(GPT-4o) | OH(Claude 4.5) | OH(Gemini 3) | Trae(DS-V3) |
|:---|:---:|:---:|:---:|:---:|:---:|
| `concat` | 0% | 0% | **100%** | **100%** | - |
| `relu` | **100%** | - | - | - | - |
| `dropout` | **100%** | - | - | - | - |
| `eltwise` | 0% | 0% | - | - | - |
| `batchnorm` | 20% | - | - | - | - |
| `pooling` | - | - | **100%** | **100%** | 0% |
| `conv_dw` | - | - | - | - | 0% |
| `swish` | 20% | **40%** | - | - | - |
| `sigmoid` | 40% | **60%** | - | - | - |
| `innerproduct`| 0% | 0% | - | - | - |
| `tanh` | 0% | - | - | - | - |
| `conv1d` | 0% | - | - | - | - |
| `softmaâŒ` | - | - | 0% | 0% | 12% |
| `lstm` | - | - | 0% | 0% | 0% |
| `gelu` | - | - | - | - | **100%** |
| `convolution` | - | - | 0% | 0% | - |

*(æ³¨: `-` è¡¨ç¤ºè¯¥æ¨¡å‹æœªè¿›è¡Œæ­¤ç®—å­çš„æµ‹è¯•)*

</details>

---

### ğŸ› ï¸ ä½¿ç”¨æ–¹æ³• (Getting Started)

```bash
# 1. Clone the repository
git clone [https://github.com/YourOrg/Agent-NCNN-Benchmark.git](https://github.com/YourOrg/Agent-NCNN-Benchmark.git)

# 2. Install dependencies

pip install -r requirements.tâŒt



# 3. Run the benchmark
python run_benchmark.py --target riscv --model gpt-4
  --test_level operator
```
---


## NCNNåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†

ä¸ºäº†ä¿ƒè¿› RISC-V åŸºç¡€è½¯ä»¶ç”Ÿæ€ç¹è£ï¼ŒåŒæ—¶æ¨åŠ¨å­¦æœ¯ç•Œå’Œäº§ä¸šç•Œåˆ©ç”¨æ™ºèƒ½ä½“ï¼ˆAI Agentsï¼‰è¿›è¡Œè·¨æ¶æ„ä»£ç è¿ç§»çš„æ¢ç´¢ï¼Œæˆ‘ä»¬åŸºäºç«¯ä¾§æ€§èƒ½æè‡´ä¼˜åŒ–çš„ NCNN æ¨ç†æ¡†æ¶ï¼Œæ„å»ºäº†ä¸šç•Œé¦–ä¸ªæ™ºèƒ½ä½“é©±åŠ¨çš„ NCNN åº“è·¨æ¶æ„è¿ç§» Benchmarkã€‚

å…·ä½“githubåœ°å€ä¸ºï¼š[https://github.com/k1366191024/agent-ncnn-benchmark/tree/main](https://github.com/k1366191024/agent-ncnn-benchmark/tree/main)


## OpenMPåº“çº§è‡ªåŠ¨å¹¶è¡Œä¼˜åŒ–å·¥å…·

RepoOMP æ˜¯ä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ– OpenMP ä»£ç åˆ†æå’Œä¼˜åŒ–çš„ç»¼åˆæ¡†æ¶ã€‚å®ƒé‡‡ç”¨ä¸‰ä¸ªä¸“é—¨çš„æ™ºèƒ½ä½“æŒ‰é¡ºåºå·¥ä½œï¼Œä»¥åˆ†æä¾èµ–å…³ç³»ã€æµ‹é‡æ€§èƒ½å¹¶è‡ªåŠ¨å‘ C/C++ ä»£ç æ·»åŠ  OpenMP åŸè¯­ã€‚

å…·ä½“githubåœ°å€ä¸ºï¼š[https://github.com/Qlalq/RepoOMP](https://github.com/Qlalq/RepoOMP)

## FFmpegåº“çº§è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†

FFmpegç­‰å…¶ä»–å¼€æºé«˜æ€§èƒ½åº“çš„è‡ªåŠ¨è¿ç§»è¯„æµ‹é›†æˆ‘ä»¬æ­£åœ¨æ¥å…¥ä¸­ï¼Œæ•¬è¯·æœŸå¾…ã€‚
