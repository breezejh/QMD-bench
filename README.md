# QMD-bench

QMD-benchæ—¨åœ¨è¯„ä¼°Agentåœ¨é«˜æ€§èƒ½åº“è·¨æ¶æ„è¿ç§»ä»»åŠ¡ä¸­çš„åŠŸèƒ½æ­£ç¡®æ€§ä¸æ€§èƒ½è¡¨ç°ï¼Œå…¨é¢è¡¡é‡è¿ç§»çš„æœ‰æ•ˆæ€§ä¸æ•ˆç‡ã€‚





| Granularity | Description                                                                                                     | Code Lines | Dependencies | Dataset Size | Language    | Correctness | Performance | Cross-Architecture |
|------------|-----------------------------------------------------------------------------------------------------------------|------------|-------------|--------------|------------|------------|------------|----------------------------------------|
| ClassEval  | Class-level code generation and evaluation benchmark                                                           |            |             | 100          | Python     | âœ…          | âŒ          | âŒ                                      |
| SWE-bench  | Repository-level benchmark for solving real-world GitHub problems                                              |            |             | 300/500      | Python     | âœ…          | âŒ          | âŒ                                      |
| JavaBench  | Professional-level Java development capability evaluation benchmark                                           |            |             | 389          | Java       | âœ…          | âŒ          | âŒ                                      |
| KernelBench| High-performance GPU kernel generation benchmark                                                               |            |             | 250          | CUDA       | âœ…          | âœ…          | âŒ                                      |
| ParEval    | Parallel computing program generation and correctness evaluation benchmark                                    |            |             | 60           | CUDA, C++  | âœ…          | âœ…          | âŒ                                      |
| Swe-Perf   | Performance optimization and bottleneck fixing benchmark in software repositories                               |            |             | 140          | Python     | âœ…          | âœ…          | âŒ                                      |
| cisc-risc  | CISC-RISC assembly code translation benchmark                                                                  |            |             | 164          | Assembly   | âœ…          | âŒ          | âœ…                                      |
| our        | High-performance library cross-architecture migration and optimization benchmark                               |            |             |              | C/C++      | âœ…          | âœ…          | âœ…                                      |


# ğŸš€ Agent-Driven OpenCV Cross-Architecture Migration Benchmark  
# æ™ºèƒ½ä½“é©±åŠ¨çš„ OpenCV è·¨æ¶æ„ä»£ç è¿ç§» Benchmark
---

## ğŸ“– ç›®å½•

- [é¡¹ç›®ä»‹ç»](#-é¡¹ç›®ä»‹ç»-introduction)
- [ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ª Benchmarkï¼Ÿ](#-ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ª-benchmark-background)
- [è¿ç§»éš¾ç‚¹](#-è¿ç§»éš¾ç‚¹-key-challenges)
- [ä¸å…¶ä»– Benchmark çš„å·®å¼‚](#-ä¸å…¶ä»–-benchmark-çš„å·®å¼‚-comparison)
- [æµ‹è¯•é›†è®¾è®¡ä¸éš¾åº¦åˆ†çº§](#-æµ‹è¯•é›†è®¾è®¡ä¸éš¾åº¦åˆ†çº§-dataset--hierarchy)
- [æµ‹è¯•é¢˜ç›®](#-æµ‹è¯•é¢˜ç›®-test-cases)
- [åŸºå‡†æµ‹è¯•ç»“æœ](#-åŸºå‡†æµ‹è¯•ç»“æœ-sota-results)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•-getting-started)
- [å¼•ç”¨](#-å¼•ç”¨-citation)

---

## ğŸ“ é¡¹ç›®ä»‹ç»

ä¸ºæ¨åŠ¨ RISC-V ç”Ÿæ€åœ¨è®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å‘å±•ï¼Œå¹¶æ¢ç´¢å¤§æ¨¡å‹æ™ºèƒ½ä½“åœ¨è·¨æ¶æ„ä»£ç è¿ç§»ä¸­çš„æ½œåŠ›ï¼Œæˆ‘ä»¬åŸºäºå¹¿æ³›ä½¿ç”¨çš„ **OpenCV è§†è§‰åº“**ï¼Œæ„å»ºäº†ä¸šç•Œé¦–ä¸ª **æ™ºèƒ½ä½“é©±åŠ¨çš„ OpenCV è·¨æ¶æ„è¿ç§» Benchmark**ã€‚

æœ¬ Benchmark èšç„¦äºå°† ARM NEON å‘é‡åŒ–ä»£ç è‡ªåŠ¨è¿ç§»è‡³ RISC-V Vector (RVV) æ¶æ„ï¼Œæ—¨åœ¨è¯„ä¼°æ™ºèƒ½ä½“åœ¨**ä¿æŒåŠŸèƒ½æ­£ç¡®æ€§**çš„åŒæ—¶ï¼Œ**å®ç°æ€§èƒ½ä¼˜åŒ–**çš„èƒ½åŠ›ï¼Œä¸ºè‡ªåŠ¨åŒ–è¿ç§»å·¥å…·æä¾›æ ‡å‡†åŒ–è¯„ä¼°å¹³å°ã€‚

---

## ğŸ’¡ ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ª Benchmarkï¼Ÿ

### ç°çŠ¶ä¸ç—›ç‚¹
å°½ç®¡ OpenCV å·²åœ¨ x86 å’Œ ARM å¹³å°ä¸Šå®ç°äº†é«˜åº¦ä¼˜åŒ–çš„å‘é‡åŒ–åç«¯ï¼Œä½†åœ¨ RISC-V å¹³å°ä¸Šï¼Œå°¤å…¶æ˜¯å¯¹ RVV æ‰©å±•çš„æ”¯æŒä»å¤„äºæ—©æœŸé˜¶æ®µã€‚æ‰‹åŠ¨è¿ç§»ä¸ä»…è€—æ—¶è€—åŠ›ï¼Œè¿˜éš¾ä»¥ä¿è¯æ€§èƒ½ä¸åŠ£äºæ ‡é‡å®ç°ã€‚

### è‡ªåŠ¨åŒ–è¿ç§»çš„ä»·å€¼
è‡ªåŠ¨åŒ–ä»£ç è¿ç§»èƒ½æ˜¾è‘—é™ä½è·¨å¹³å°ç§»æ¤çš„æˆæœ¬ï¼Œå°¤å…¶åœ¨ RISC-V ç”Ÿæ€å¿«é€Ÿå‘å±•çš„èƒŒæ™¯ä¸‹ï¼Œå…·å¤‡é‡è¦çš„å·¥ç¨‹ä¸ç§‘ç ”ä»·å€¼ã€‚

### å¤§æ¨¡å‹æ™ºèƒ½ä½“çš„æœºé‡
å¤§æ¨¡å‹åœ¨ä»£ç ç†è§£ä¸ç”Ÿæˆä»»åŠ¡ä¸Šå±•ç°å‡ºå¼ºå¤§æ½œåŠ›ã€‚æœ¬ Benchmark æ—¨åœ¨æ¨åŠ¨æ™ºèƒ½ä½“åœ¨**è·¨æ¶æ„ã€é«˜æ€§èƒ½ä»£ç è¿ç§»**ä»»åŠ¡ä¸Šçš„èƒ½åŠ›è¾¹ç•Œï¼ŒåŠ é€Ÿ RISC-V è§†è§‰åº”ç”¨çš„è½åœ°ã€‚

---

## ğŸ§© è¿ç§»éš¾ç‚¹

### 1. æ¶æ„å·®å¼‚
- **å®šé•¿ vs å˜é•¿å‘é‡**: ARM NEON ä½¿ç”¨ 128-bit å›ºå®šé•¿åº¦å¯„å­˜å™¨ï¼Œè€Œ RISC-V RVV æ”¯æŒå¯å˜é•¿åº¦å‘é‡ (VLEN)ï¼Œéœ€é‡æ„å¾ªç¯ç»“æ„ä¸º Strip-mining æ¨¡å¼ã€‚
- **æŒ‡ä»¤æ˜ å°„å¤æ‚**: å¦‚ `vqmovn`ã€`vmlaq` ç­‰ NEON æŒ‡ä»¤åœ¨ RVV ä¸­éœ€é€šè¿‡å¤šæ¡åŸºç¡€æŒ‡ä»¤ç»„åˆå®ç°ã€‚

### 2. æ•°æ®å¸ƒå±€ä¸å†…å­˜è®¿é—®
- OpenCV ä½¿ç”¨æ ‡å‡† HWC/CHW å¸ƒå±€ï¼Œä½†æŸäº›æ¨¡å—ä½¿ç”¨æ­¥é•¿å’Œéè¿ç»­å†…å­˜ï¼Œéœ€æ™ºèƒ½ä½“æ­£ç¡®å¤„ç†è¾¹ç•Œä¸å¯¹é½ã€‚
- RVV çš„ LMUL æœºåˆ¶è¦æ±‚æ™ºèƒ½ä½“åœ¨å¯„å­˜å™¨åˆ†ç»„ä¸å†…å­˜ååä¹‹é—´åšå‡ºæƒè¡¡ã€‚

### 3. å·¥ç¨‹çº§ä¾èµ–ä¸ä¸Šä¸‹æ–‡ç†è§£
- OpenCV æ¨¡å—ä¼—å¤šï¼Œç®—å­ä¾èµ– `core`ã€`hal`ã€`utils` ç­‰åº•å±‚æ¨¡å—ã€‚
- å®å®šä¹‰ã€å†…è”å‡½æ•°å’Œæ¨¡æ¿ä»£ç å¢åŠ äº†ä»£ç ç†è§£çš„å¤æ‚åº¦ï¼Œæ˜“å¯¼è‡´"ä¸Šä¸‹æ–‡å¹»è§‰"ã€‚

---

## âš–ï¸ ä¸å…¶ä»– Benchmark çš„å·®å¼‚

| Benchmark | ç²’åº¦ | è¯­è¨€ | æ­£ç¡®æ€§ | æ€§èƒ½ | è·¨æ¶æ„ | ä»»åŠ¡ç„¦ç‚¹ |
|-----------|------|------|--------|------|---------|-----------|
| SWE-bench | Repo-level | Python | âœ… | âŒ | âŒ | ä¿®å¤ Issue |
| KernelBench | Repo-level | CUDA | âœ… | âœ… | âŒ | GPU å†…æ ¸ç”Ÿæˆ |
| CISC-RISC | Func-level | Assembly | âœ… | âŒ | âœ… | æ±‡ç¼–è½¬è¯‘ |
| **Ours** | **Repo-level** | **C++ / NEON â†’ RVV** | **âœ…** | **âœ…** | **âœ…** | **è·¨æ¶æ„è§†è§‰ç®—å­è¿ç§»** |

---

## ğŸ“Š æµ‹è¯•é›†è®¾è®¡ä¸éš¾åº¦åˆ†çº§

### 1. æµ‹è¯•å±‚çº§è®¾è®¡

#### ğŸŸ¢ Level 1: ç®—å­çº§æµ‹è¯•
- **åŠŸèƒ½æ­£ç¡®æ€§**: è¾“å‡ºä¸æ ‡é‡å®ç°ä¸€è‡´ï¼ˆå®¹å¿æµ®ç‚¹è¯¯å·®ï¼‰
- **æ€§èƒ½è¯„ä¼°**: å¯¹æ¯”æ ‡é‡å®ç°ä¸äººå·¥ä¼˜åŒ– RVV å®ç°çš„åŠ é€Ÿæ¯”

#### ğŸŸ¡ Level 2: æ¨¡å—çº§æµ‹è¯•
- æµ‹è¯•å®Œæ•´è§†è§‰æ¨¡å—åœ¨ RISC-V ä¸Šçš„æ¨ç†ç²¾åº¦ä¸ç«¯åˆ°ç«¯å»¶è¿Ÿ
- ç¤ºä¾‹ï¼š`imgproc::filter2D`ã€`calib3d::undistort`

#### ğŸ”´ Level 3: åº”ç”¨çº§æµ‹è¯•
- è¿è¡Œå®Œæ•´è§†è§‰æµæ°´çº¿ï¼Œè¯„ä¼°ç³»ç»Ÿçº§å…¼å®¹æ€§ä¸ååé‡
- ç¤ºä¾‹ï¼šç›®æ ‡æ£€æµ‹ã€å›¾åƒæ‹¼æ¥ã€äººè„¸è¯†åˆ«æµæ°´çº¿

### 2. éš¾åº¦åˆ†çº§æ ‡å‡†

#### ç®—å­çº§éš¾åº¦
åŸºäºä»£ç å¤æ‚åº¦ã€æ•°æ®ä¾èµ–å…³ç³»ã€å‘é‡åŒ–æ”¶ç›Šä¸‰ä¸ªç»´åº¦ï¼š
- **ç®€å•**: é€åƒç´ æ“ä½œï¼Œæ— æ•°æ®ä¾èµ–
- **ä¸­ç­‰**: å±€éƒ¨é‚»åŸŸæ“ä½œï¼Œè½»åº¦æ•°æ®ä¾èµ–  
- **å›°éš¾**: å…¨å±€æ“ä½œæˆ–å¤æ‚æ•°æ®æµï¼Œé«˜åº¦ä¾èµ–å‘é‡åŒ–

---

## ğŸ§ª æµ‹è¯•é¢˜ç›®

### 1. ç®—å­çº§é¢˜ç›®
æ¶µç›– OpenCV æ ¸å¿ƒè§†è§‰ç®—å­ï¼š

**æ»¤æ³¢ç±»**
- `filter2D`ã€`GaussianBlur`ã€`Sobel`ã€`Laplacian`

**å‡ ä½•å˜æ¢**  
- `warpAffine`ã€`resize`ã€`remap`ã€`rotate`

**ç‰¹å¾æå–**
- `Canny`ã€`HoughLines`ã€`HoughCircles`ã€`cornerHarris`

**ç›´æ–¹å›¾ä¸ç»Ÿè®¡**
- `calcHist`ã€`meanStdDev`ã€`minMaxLoc`ã€`countNonZero`

### 2. æ¨¡å—çº§é¢˜ç›®
- **imgproc**: å½¢æ€å­¦æ“ä½œã€è¾¹ç¼˜æ£€æµ‹ã€è½®å»“æŸ¥æ‰¾ã€å›¾åƒé‡‘å­—å¡”
- **calib3d**: ç›¸æœºæ ‡å®šã€ç«‹ä½“æ ¡æ­£ã€å§¿æ€ä¼°è®¡
- **video**: å…‰æµè®¡ç®—ã€èƒŒæ™¯å‡é™¤ã€ç›®æ ‡è·Ÿè¸ª
- **features2d**: ç‰¹å¾ç‚¹æ£€æµ‹ä¸åŒ¹é…

### 3. åº”ç”¨çº§é¢˜ç›®
- **ç›®æ ‡æ£€æµ‹**: YOLOv5 + OpenCV DNN
- **å›¾åƒæ‹¼æ¥**: Stitcher æ¨¡å—å®Œæ•´æµç¨‹
- **äººè„¸è¯†åˆ«**: LBPH + Haar Cascade ç»„åˆæµç¨‹
- **AR åº”ç”¨**: æ ‡è®°æ£€æµ‹ä¸ä¸‰ç»´å åŠ 

> ğŸ“¥ å®Œæ•´æµ‹è¯•ç”¨ä¾‹è§ `data/` ç›®å½•ï¼ŒåŒ…å« JSON æ ¼å¼çš„æµ‹è¯•è§„èŒƒä¸éªŒè¯è„šæœ¬ã€‚

---

## ğŸ“Š åŸºå‡†æµ‹è¯•ç»“æœ

æˆ‘ä»¬æŒç»­è·Ÿè¸ªä¸»æµå¤§æ¨¡å‹åœ¨æœ¬ Benchmark ä¸Šçš„è¡¨ç°ï¼Œæœ€æ–°ç»“æœè¯·å‚è§ï¼š[SoTA ç»“æœ](./results/sota_results.csv)

<details>
<summary>ğŸ”» ç‚¹å‡»æŸ¥çœ‹è¿‘æœŸæ¨¡å‹è¡¨ç°ï¼ˆç¤ºä¾‹ï¼‰</summary>

| æ¨¡å‹ | ç®—å­é€šè¿‡ç‡ | å¹³å‡åŠ é€Ÿæ¯” | ä»£ç è´¨é‡ |
|------|------------|------------|----------|
| GPT-4 | 68% | 1.8x | â­â­â­â­ |
| Claude-3 | 72% | 2.1x | â­â­â­â­â­ |
| DeepSeek-Coder | 65% | 1.9x | â­â­â­â­ |

</details>

---

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/YourOrg/Agent-OpenCV-Benchmark.git

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. è¿è¡Œè¯„æµ‹
python run_benchmark.py \
  --source_arch arm \
  --target_arch riscv \
  --model your-agent-model \
  --test_level operator
