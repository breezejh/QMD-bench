# 算子维度划分介绍

## 维度1. 指令集差异程度

本维度旨在为OpenCV算子从ARM NEON架构到RISC-V RVV架构的迁移工作，提供一个清晰的**指令集差异程度**评估标准。

评判的核心依据是分析算子实现中所使用的ARM NEON Intrinsics，评估其迁移到RVV的难度。


###  难度等级定义

- Level 1：直接映射
算子使用的intrinsic指令可以直接或概念上迁移，在两种架构中都有直接或非常相似的功能指令对应，是跨架构迁移时最容易处理的部分。

- Level 2：组合模拟
 算子调用了ARM NEON 独特或惯用的指令，这部分指令在RVV中没有直接的单指令对应，迁移时通常需要用多条RVV指令组合模拟，或者需要重新设计算法。

## 维度2.依赖链需迁移程度
旨在为OpenCV算子从ARM NEON架构到RISC-V RVV架构的迁移工作，提供一个清晰的**依赖链需迁移程度**评估标准。

评判的核心依据是分析算子实现中的依赖链类型，评估算子迁移到RVV的同时，需迁移多少上下文内容。


### 依赖链类型
- **架构无关类的依赖链**：**算子的所有依赖（显式+隐式）都是架构无关的**，迁移成本是固定的、一次性的，一旦迁移完成，所有依赖它的算子都可以直接使用。迁移这类算子重点在关注算子本身，**无需协调迁移策略**。
	- 该类算子对于agent来说，迁移的难度**主要体现在正确替换算子内的NEON intrinsic（这由另一个硬件调用维度评估）**。
- **架构相关类的依赖链**：**算子的依赖链，无论是显示或隐式依赖，至少有一个是架构相关的**，迁移这类算子不仅要关注算子本身，还要如何整体迁移依赖链，因为这些模块被多个算子共用，**需要协调迁移策略**[如：统一接口设计，不断增加、优化分发层的配置，是否已存在针对某架构迁移的接口，这都需要在迁移各个算子时，逐渐完成迁移]。
	- 这类算子对于agent来说，迁移的难度在于**不仅需要正确迁移算子本身，还需协调迁移依赖链**。
 
---
## 两个维度如何分别评估Agent 的能力
|维度	|评估内容|测试的Agent能力|
|---|---|---|
|依赖链需迁移程度	|要迁移多少内容|• 依赖发现能力（能否找到隐式依赖）<br>• 依赖判断：能否区分架构无关 vs 架构绑定模块<br>• 上下文管理能力（读取多少文件）<br>• 模块协调能力（如何处理共用模块）|
|指令集差异程度	|怎么进行迁移|• 指令理解能力（是否知道vtbl的语义）<br>• 架构知识（是否知道RVV的对应指令）<br>• 算法设计能力（能否设计等价实现）|

----
## 最终难度分级
||依赖架构无关|依赖架构相关|
|---|---|---|
|**指令直接映射**|直接映射+迁移算子|直接映射+迁移算子和依赖链|
|**指令组合重构**|组合重构+迁移算子|组合重构+迁移算子和依赖链|


